# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É —Ç–µ—Å—Ç–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## –ú–µ—Ç–æ–¥ 1: –ß–µ—Ä–µ–∑ Godot Editor (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ Godot 4.5+
2. –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ü–µ–Ω—É `tests/performance_test.tscn`
3. –ù–∞–∂–º–∏—Ç–µ F5 (Run Scene) –∏–ª–∏ –∫–Ω–æ–ø–∫—É "Run Current Scene"
4. –¢–µ—Å—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
   - –ó–∞–≥—Ä—É–∑–∏—Ç –ß–µ—Ä–µ–ø–æ–≤–µ—Ü (–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã 59.1167, 37.9)
   - –í–∫–ª—é—á–∏—Ç –Ω–æ—á–Ω–æ–π —Ä–µ–∂–∏–º
   - –ë—É–¥–µ—Ç –µ—Ö–∞—Ç—å –ø—Ä—è–º–æ 30 —Å–µ–∫—É–Ω–¥
   - –ö–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã –≤—ã–≤–æ–¥–∏—Ç—å –æ—Ç—á–µ—Ç –æ —É–∑–∫–∏—Ö –º–µ—Å—Ç–∞—Ö –≤ –∫–æ–Ω—Å–æ–ª—å
   - –í –∫–æ–Ω—Ü–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç CSV —Ñ–∞–π–ª —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏

5. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã:
   - **–ö–æ–Ω—Å–æ–ª—å Godot**: –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —É–∑–∫–∏—Ö –º–µ—Å—Ç –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã
   - **CSV —Ñ–∞–π–ª**: `user://performance_YYYYMMDD_HHMMSS.csv` (—Å–º. –Ω–∏–∂–µ –≥–¥–µ –Ω–∞–π—Ç–∏)

## –ì–¥–µ –Ω–∞–π—Ç–∏ CSV —Ñ–∞–π–ª

### macOS:
```
~/Library/Application Support/Godot/app_userdata/osm-racing/
```

### Windows:
```
%APPDATA%\Godot\app_userdata\osm-racing\
```

### Linux:
```
~/.local/share/godot/app_userdata/osm-racing/
```

## –ú–µ—Ç–æ–¥ 2: –ß–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É (—Å GUI)

### macOS:
```bash
cd /Users/sergey/webProjects/osm-racing
"/Applications/Godot.app/Contents/MacOS/Godot" --path . res://tests/performance_test.tscn 2>&1 | tee performance_output.log
```

### Windows:
```cmd
cd C:\path\to\osm-racing
"C:\Program Files\Godot\Godot.exe" --path . res://tests/performance_test.tscn
```

### Linux:
```bash
cd /path/to/osm-racing
godot --path . res://tests/performance_test.tscn 2>&1 | tee performance_output.log
```

## –ß—Ç–æ –∏—Å–∫–∞—Ç—å –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö

### –£–∑–∫–∏–µ –º–µ—Å—Ç–∞

#### üî¥ CRITICAL (–¢—Ä–µ–±—É–µ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –≤–Ω–∏–º–∞–Ω–∏—è):
- **Frame Time > 33ms** (FPS < 30)
- **Physics Time > 10ms**
- **Draw Calls > 3000**

#### üü† HIGH (–°–µ—Ä—å–µ–∑–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã):
- **Frame Time 16-33ms** (FPS 30-60)
- **Physics Time 5-10ms**
- **Draw Calls 2000-3000**
- **Physics Bodies > 200**

#### üü° MEDIUM (–ú–æ–∂–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å):
- **Physics Time 3-5ms**
- **Draw Calls 1000-2000**
- **Vertex Count > 500k**
- **Node Count > 5000**
- **Physics Bodies 150-200**

#### üü¢ LOW (–ù–æ—Ä–º–∞–ª—å–Ω–æ):
- **Frame Time < 16ms** (FPS > 60)
- **Physics Time < 3ms**
- **Draw Calls < 1000**

### –ü—Ä–∏–º–µ—Ä—ã —É–∑–∫–∏—Ö –º–µ—Å—Ç –∫–æ—Ç–æ—Ä—ã–µ –º—ã –∏—â–µ–º:

1. **–ú–Ω–æ–≥–æ Draw Calls**:
   - –†–µ—à–µ–Ω–∏–µ: –ë–∞—Ç—á–∏–Ω–≥ –º–µ—à–µ–π, MultiMesh, LOD

2. **–í—ã—Å–æ–∫–æ–µ Physics Time**:
   - –†–µ—à–µ–Ω–∏–µ: –£–º–µ–Ω—å—à–∏—Ç—å NPC, —É–ø—Ä–æ—Å—Ç–∏—Ç—å –∫–æ–ª–ª–∏–∑–∏–∏, LOD –¥–ª—è —Ñ–∏–∑–∏–∫–∏

3. **–ú–Ω–æ–≥–æ vertices**:
   - –†–µ—à–µ–Ω–∏–µ: LOD —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –∑–¥–∞–Ω–∏–π, —É–ø—Ä–æ—â–µ–Ω–Ω—ã–µ –º–µ—à–∏

4. **–ë–æ–ª—å—à–∞—è –æ—á–µ—Ä–µ–¥—å –∑–¥–∞–Ω–∏–π (Building Queue)**:
   - –†–µ—à–µ–Ω–∏–µ: –£—Å–∫–æ—Ä–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –º–µ—à–µ–π, frustum culling

5. **–ú–Ω–æ–≥–æ Physics Bodies**:
   - –†–µ—à–µ–Ω–∏–µ: –û—Ç–∫–ª—é—á–∞—Ç—å —Ñ–∏–∑–∏–∫—É –¥–ª—è –¥–∞–ª—å–Ω–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤

## –¢–µ–∫—É—â–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (—É–∂–µ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã)

‚úÖ Backface culling –≤–∫–ª—é—á–µ–Ω (15-25% GPU –ø—Ä–∏—Ä–æ—Å—Ç)
‚úÖ SSR steps —Å–Ω–∏–∂–µ–Ω—ã —Å 64 ‚Üí 24 (10-15% GPU –ø—Ä–∏—Ä–æ—Å—Ç)
‚úÖ Rain particles —Å–Ω–∏–∂–µ–Ω—ã —Å 8000 ‚Üí 4000 (8-12% GPU –ø—Ä–∏—Ä–æ—Å—Ç)
‚úÖ Performance profiler –æ—Ç–∫–ª—é—á–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (2-3% –ø—Ä–∏—Ä–æ—Å—Ç)

**–û–∂–∏–¥–∞–µ–º—ã–π –ø—Ä–∏—Ä–æ—Å—Ç**: ~35-50% GPU, ~5-10% CPU, –∏—Ç–æ–≥–æ +40-70% FPS

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–æ/–ø–æ—Å–ª–µ

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç **–î–û** –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π (–æ—Ç–∫–∞—Ç–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ git), –∑–∞—Ç–µ–º **–ü–û–°–õ–ï**.

–°—Ä–∞–≤–Ω–∏—Ç–µ:
- Average FPS
- Min FPS (—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å)
- Draw Calls
- Frame Time variance

–ü—Ä–∏–º–µ—Ä:
```
–î–û:  Avg FPS: 45, Min: 30, Draw Calls: 2800
–ü–û–°–õ–ï: Avg FPS: 75, Min: 60, Draw Calls: 1200
–ü—Ä–∏—Ä–æ—Å—Ç: +67% FPS, +100% Min FPS, -57% Draw Calls ‚úÖ
```
